var e=Object.defineProperty,n=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,l=(n,t,r)=>t in n?e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,o=(e,o)=>{for(var a in o||(o={}))t.call(o,a)&&l(e,a,o[a]);if(n)for(var a of n(o))r.call(o,a)&&l(e,a,o[a]);return e};import{d as a,p as s,i as p,o as i,c,t as u,u as f,g as y,w as d,v as b,r as m}from"./vendor.3e17dbac.js";const v="\nexport function {0}(value?: any): {1} {\n    const conditions:ConditionItem[] = [\n      {2}\n    ];\n    return safeConvert(value, conditions);\n  }\n",g="\nexport interface {0} {\n{1}\n}\n",h='{\n   label: "{0}",\n   type: "{1}",\n   convert: {2} \n }';function _(e){return e?"(val: any, defaultVal = {0}) => val ?? defaultVal":"(val: any) => {0}"}function S(e){const n=Object.prototype.toString.call(e).match(/\[object[\s]*([A-Za-z]+)\]/);return n?n[1]:""}function w(e){return"Object"===e}function C(e){return"String"===e}function k(e){return"Number"===e}function A(e){return"Array"===e}function j(e){return"Boolean"===e}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */const V=/(-|_|\.|\s)+(.)?/g;function O(e){return e.replace(V,((e,n,t)=>t?t.toUpperCase():"")).replace(/^([A-Z])/,(e=>e.toLowerCase()))}function T(e){return e.split(".").map((e=>function(e){return e.charAt(0).toUpperCase()+e.substr(1)}(O(e)))).join(".")}class x{constructor(e){this._str="",this._str=null!=e?e:""}append(e){this._str+=e}newLine(){this._str+="\n"}addBlank(e=2){this._str+=new Array(e).fill(" ").join("")}value(){return this._str}}function N(e,n){const t={};for(const r of n){let n=null==e?void 0:e[r.label];if("Array"===r.type){const e=[];n instanceof Array||(n=[]);for(const t of n)e.push(r.convert(t));t[r.label]=e}else t[r.label]=r.convert(n)}return t}const $=' {\n  "access_token": "sdfsdfsd",\n  "expires_in": "3600",\n  "token_type": "bearer",\n  "scope": "",\n  "refresh_token": "fwerfwefwefs",\n  "testArr":["1"],\n  "testArr1":[{"a": 1}],\n  "user": {\n    "id": "werwe",\n    "name": "fdsfsd",\n    "account":"fdsfsd",\n    "mail_address": "fsdfsdfdsfs@gmail.com",\n    "is_premium": false,\n    "x_restrict": 2,\n    "is_mail_authorized": true,\n    "require_policy_agreement": false\n  },\n  "response": {\n    "access_token": "fsdfsdfsd",\n    "expires_in": 3600,\n    "token_type": "bearer",\n    "scope": "",\n    "refresh_token": "fsdfsdfsd"\n\n  }\n}';console.log(function(e){const n=[{label:"access_token",type:"String",convert:(e,n="")=>null!=e?e:n},{label:"expires_in",type:"String",convert:(e,n="")=>null!=e?e:n},{label:"token_type",type:"String",convert:(e,n="")=>null!=e?e:n},{label:"scope",type:"String",convert:(e,n="")=>null!=e?e:n},{label:"refresh_token",type:"String",convert:(e,n="")=>null!=e?e:n},{label:"testArr",type:"Array",convert:(e,n=[])=>null!=e?e:n},{label:"testArr1",type:"Array",convert:e=>function(e){return N(e,[{label:"a",type:"Number",convert:(e,n=0)=>null!=e?e:n}])}(e)},{label:"user",type:"Object",convert:e=>function(e){return N(e,[{label:"id",type:"String",convert:(e,n="")=>null!=e?e:n},{label:"name",type:"String",convert:(e,n="")=>null!=e?e:n},{label:"account",type:"String",convert:(e,n="")=>null!=e?e:n},{label:"mail_address",type:"String",convert:(e,n="")=>null!=e?e:n},{label:"is_premium",type:"Boolean",convert:(e,n=!0)=>null!=e?e:n},{label:"x_restrict",type:"Number",convert:(e,n=0)=>null!=e?e:n},{label:"is_mail_authorized",type:"Boolean",convert:(e,n=!0)=>null!=e?e:n},{label:"require_policy_agreement",type:"Boolean",convert:(e,n=!0)=>null!=e?e:n}])}(e)},{label:"response",type:"Object",convert:e=>function(e){return N(e,[{label:"access_token",type:"String",convert:(e,n="")=>null!=e?e:n},{label:"expires_in",type:"Number",convert:(e,n=0)=>null!=e?e:n},{label:"token_type",type:"String",convert:(e,n="")=>null!=e?e:n},{label:"scope",type:"String",convert:(e,n="")=>null!=e?e:n},{label:"refresh_token",type:"String",convert:(e,n="")=>null!=e?e:n}])}(e)}];return N(e,n)}(JSON.parse($)));var J=a({name:"HomePage",data:()=>({inputString:$,configData:null,outString:"",outConvertString:"",fnChecked:!1}),methods:{tranferType(e){var n;if(A(e.type)){const t=new Array(e.deep).fill("[]").join("");return(w(null==(n=e.props[0])?void 0:n.type)?T(e.itemType):O(e.itemType))+t}return e.type},formateJson(){this.inputString=JSON.stringify(JSON.parse(this.inputString),null,2),this.configData=this.toConfigJson(JSON.parse(this.inputString))},generate(){this.outString="",this.configData&&(this.generateInterface(this.configData),this.fnChecked&&(this.outConvertString="\n/**\n * 公共方法可单独放置\n */\n// common start\nfunction safeConvert(source: any, conditions: ConditionItem[]) {\n  const res: any = {};\n  for (const con of conditions) {\n    let value = source?.[con.label];\n    if (con.type === 'Array') {\n        const val: any[] = [];\n        if (!(value instanceof Array)) {\n            value = [];\n        } \n        for (const item of value) {\n            val.push(con.convert(item))\n        }\n        res[con.label] = val;\n    } else {\n        res[con.label] = con.convert(value)\n    }\n  }\n  return res;\n}\n\n\ninterface ConditionItem {\n  label: string;\n  type: string;\n  convert: (val: any, defaultVal?: any) => any;\n}\n// common end\n",this.generateConvert(this.configData)),navigator.clipboard.writeText(this.outString+this.outConvertString).then((e=>{console.log("success")})))},toConfigJson(e,n="Welcome",t=1){const r=S(e),l={label:n,jsonKey:n,type:r,tsType:O(r),props:[],isNull:!1,deep:t,comment:""};if(A(r)){const n=this.mergeArray(e,t,l);w(n.type)&&l.props.push(n)}if(w(r)){l.tsType=T(l.label);for(const n in e)if(e.hasOwnProperty(n)){const r=e[n],o=S(r);w(o)||A(o)?l.props.push(this.toConfigJson(r,n)):l.props.push({label:n,type:o,props:[],isNull:!1,deep:t,comment:"",jsonKey:n,tsType:O(o)})}}return l},mergeArray(e,n=1,t){const r=e[0],l=S(r);let a;if(A(l))a=this.mergeArray(r,n+1,t);else if(w(l)){let r={};for(const n of e)r=o(o({},r),n);t&&(t.deep=n,t.itemType=T(t.label)),a=this.toConfigJson(r,t.label)}else a={label:"",type:l,props:[],isNull:!1,deep:n,comment:"",jsonKey:"",tsType:O(l)},t&&(t.deep=n,t.itemType=O(l));return a},generateInterface(e){const n=new x;let t=g.replace("{0}",T(e.label));for(const r of e.props)r.comment&&(n.append(`/** ${r.comment} */`),n.newLine()),w(r.type)&&(n.append(`${r.label}: ${T(r.label)}`),this.generateInterface(r)),A(r.type)&&(n.append(`${r.label}: ${r.itemType}${new Array(r.deep).fill("[]").join()}`),r.props.length&&this.generateInterface(r.props[0])),C(r.type)&&n.append(`${r.label}: string`),k(r.type)&&n.append(`${r.label}: number`),j(r.type)&&n.append(`${r.label}: boolean`),n.append(","),n.newLine();this.outString+=t.replace("{1}",n.value())},generateConvert(e){let n=v.replace("{0}",O(e.label));n=n.replace("{1}",T(e.label));const t=new x;for(const r of e.props){let e=h.replace("{0}",r.label);w(r.type)&&(e=e.replace("{1}","Object"),e=e.replace("{2}",_().replace("{0}",`${O(r.label)}(val)`)),this.generateConvert(r)),A(r.type)&&(e=e.replace("{1}","Array"),r.props.length?(e=e.replace("{2}",_().replace("{0}",`${O(r.label)}(val)`)),this.generateConvert(r.props[0])):e=e.replace("{2}",_(!0).replace("{0}","[]"))),C(r.type)&&(e=e.replace("{1}","String"),e=e.replace("{2}",_(!0).replace("{0}","''"))),k(r.type)&&(e=e.replace("{1}","Number"),e=e.replace("{2}",_(!0).replace("{0}","0"))),j(r.type)&&(e=e.replace("{1}","Boolean"),e=e.replace("{2}",_(!0).replace("{0}","true"))),t.append(e),t.append(",")}t.newLine(),n=n.replace("{2}",t.value()),this.outConvertString+=n}}});const I=d();s("data-v-20e14577");const U={class:"HomePage"},D=b("转换方法"),B=b("格式化"),P=b("生成"),z={style:{overflow:"auto"}},K={key:0,style:{"margin-left":"10px"}};p();const L=I(((e,n,t,r,l,o)=>{const a=m("el-input"),s=m("el-checkbox"),p=m("el-button"),d=m("el-table-column"),b=m("el-option"),v=m("el-select"),g=m("el-table");return i(),c("div",U,[u("div",null,[u(a,{type:"textarea",placeholder:"请输入内容",modelValue:e.inputString,"onUpdate:modelValue":n[1]||(n[1]=n=>e.inputString=n)},null,8,["modelValue"]),u("div",null,[u(s,{modelValue:e.fnChecked,"onUpdate:modelValue":n[2]||(n[2]=n=>e.fnChecked=n)},{default:I((()=>[D])),_:1},8,["modelValue"]),u(p,{onClick:n[3]||(n[3]=n=>e.formateJson())},{default:I((()=>[B])),_:1}),u(p,{onClick:n[4]||(n[4]=n=>e.generate())},{default:I((()=>[P])),_:1})])]),u("div",z,[e.configData?(i(),c(g,{key:0,data:e.configData.props,"row-key":"label","default-expand-all":"","tree-props":{children:"props",hasChildren:"hasChildren"}},{default:I((()=>[u(d,{prop:"jsonKey",label:"jsonKey"}),u(d,{prop:"label",label:"属性名称"}),u(d,{prop:"tsType",label:"类型"},{default:I((n=>["Array"===n.row.type?(i(),c("span",K,f(e.tranferType(n.row)),1)):(i(),c(v,{key:1,style:{"margin-left":"10px"},size:"mini",modelValue:n.row.tsType,"onUpdate:modelValue":e=>n.row.tsType=e},{default:I((()=>[u(b,{label:"string",value:"string"}),u(b,{label:"number",value:"number"}),u(b,{label:"boolean",value:"boolean"})])),_:2},1032,["modelValue","onUpdate:modelValue"]))])),_:1}),u(d,{prop:"tsType",label:"注释"},{default:I((e=>[u(a,{size:"mini",modelValue:e.row.comment,"onUpdate:modelValue":n=>e.row.comment=n},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"])):y("",!0)])])}));J.render=L,J.__scopeId="data-v-20e14577";export default J;
