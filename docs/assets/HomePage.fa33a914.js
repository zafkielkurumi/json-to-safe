var e=Object.defineProperty,n=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,a=(n,t,l)=>t in n?e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[t]=l,o=(e,o)=>{for(var r in o||(o={}))t.call(o,r)&&a(e,r,o[r]);if(n)for(var r of n(o))l.call(o,r)&&a(e,r,o[r]);return e};import{d as r,p,i as s,o as i,c as u,u as c,v as d,x as f,g as y,w as m,r as g}from"./vendor.9c81096b.js";const b="\nexport function {0}(value?: any): {1} {\n    const conditions:ConditionItem[] = [\n      {2}\n    ];\n    return safeConvert(value, conditions);\n  }\n",h="\nexport interface {0} {\n{1}\n}\n",v='{\n   label: "{0}",\n   type: "{1}",\n   convert: {2} \n }';function C(e){return e?"(val: any, defaultVal = {0}) => val ?? defaultVal":"(val: any) => {0}"}function w(e){const n=Object.prototype.toString.call(e).match(/\[object[\s]*([A-Za-z]+)\]/);return n?n[1]:""}function V(e){return"Object"===e}function N(e){return"String"===e}function T(e){return"Null"===e}function S(e){return"Number"===e}function j(e){return"Array"===e}function _(e){return"Boolean"===e}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */const $=/(-|_|\.|\s)+(.)?/g;function A(e){return e.replace($,((e,n,t)=>t?t.toUpperCase():"")).replace(/^([A-Z])/,(e=>e.toLowerCase()))}function O(e){return e.split(".").map((e=>function(e){return e.charAt(0).toUpperCase()+e.substr(1)}(A(e)))).join(".")}class k{constructor(e){this._str="",this._str=null!=e?e:""}append(e){this._str+=e}newLine(){this._str+="\n"}addBlank(e=2){this._str+=new Array(e).fill(" ").join("")}value(){return this._str}}var x=r({name:"HomePage",data:()=>({inputString:"",configData:null,outString:"",outConvertString:"",fnChecked:!1,rootName:"Welcome"}),methods:{tranferType(e){var n;if(j(e.type)){const t=new Array(e.deep).fill("[]").join("");return(V(null==(n=e.props[0])?void 0:n.type)?O(e.itemType):A(e.itemType))+t}return e.type},formateJson(){this.inputString=JSON.stringify(JSON.parse(this.inputString),null,2),this.configData=this.toConfigJson(JSON.parse(this.inputString),this.rootName)},generate(){this.outString="",this.configData&&(this.generateInterface(this.configData),this.fnChecked&&(this.outConvertString="\n/**\n * 公共方法可单独放置\n */\n// common start\nfunction safeConvert(source: any, conditions: ConditionItem[]) {\n  const res: any = {};\n  for (const con of conditions) {\n    let value = source?.[con.label];\n    if (con.type === 'Array') {\n        const val: any[] = [];\n        if (!(value instanceof Array)) {\n            value = [];\n        } \n        for (const item of value) {\n            val.push(con.convert(item))\n        }\n        res[con.label] = val;\n    } else {\n        res[con.label] = con.convert(value)\n    }\n  }\n  return res;\n}\n\n\ninterface ConditionItem {\n  label: string;\n  type: string;\n  convert: (val: any, defaultVal?: any) => any;\n}\n// common end\n",this.generateConvert(this.configData)),navigator.clipboard.writeText(this.outString+this.outConvertString).then((e=>{console.log("success"),this.$message.success("已复制到剪切板")})))},toConfigJson(e,n,t=1){const l=w(e),a={label:n,jsonKey:n,type:l,tsType:A(l),props:[],isNull:!1,deep:t,comment:""};if(j(l)){const n=this.mergeArray(e,t,a);V(n.type)&&a.props.push(n)}if(V(l)){a.tsType=O(a.label);for(const n in e)if(e.hasOwnProperty(n)){const l=e[n],o=w(l);V(o)||j(o)?a.props.push(this.toConfigJson(l,n)):a.props.push({label:n,type:o,props:[],isNull:!1,deep:t,comment:"",jsonKey:n,tsType:A(o)})}}return a},mergeArray(e,n=1,t){const l=e[0],a=w(l);let r;if(j(a))r=this.mergeArray(l,n+1,t);else if(V(a)){let l={};for(const n of e)l=o(o({},l),n);t&&(t.deep=n,t.itemType=O(t.label)),r=this.toConfigJson(l,t.label)}else r={label:"",type:a,props:[],isNull:!1,deep:n,comment:"",jsonKey:"",tsType:A(a)},t&&(t.deep=n,t.itemType=A(a));return r},generateInterface(e){const n=new k;let t=h.replace("{0}",O(e.label));for(const l of e.props){l.comment&&(n.append(`/** ${l.comment} */`),n.newLine());const e=l.isNull?"| null":"";V(l.type)&&(n.append(`${l.label}: ${O(l.label)}`),this.generateInterface(l)),j(l.type)&&(n.append(`${l.label}: ${l.itemType}${new Array(l.deep).fill("[]").join()}`),l.props.length&&this.generateInterface(l.props[0])),N(l.type)&&n.append(`${l.label}: string ${e}`),S(l.type)&&n.append(`${l.label}: number ${e}`),_(l.type)&&n.append(`${l.label}: boolean ${e}`),T(l.type)&&n.append(`${l.label}: null`),n.append(","),n.newLine()}this.outString+=t.replace("{1}",n.value())},generateConvert(e){let n=b.replace("{0}",A(e.label+"Convert"));n=n.replace("{1}",O(e.label));const t=new k;for(const l of e.props){let e=v.replace("{0}",l.label);if(V(l.type)&&(e=e.replace("{1}","Object"),e=e.replace("{2}",C().replace("{0}",`${A(l.label+"Convert")}(val)`)),this.generateConvert(l)),j(l.type)){e=e.replace("{1}","Array");const n=l.default?l.default:l.isNull?"null":"[]";l.props.length?(e=e.replace("{2}",C().replace("{0}",`${A(l.label+"Convert")}(val)`)),this.generateConvert(l.props[0])):e=e.replace("{2}",C(!0).replace("{0}",n))}if(N(l.type)){const n=l.default?l.default:l.isNull?"null":"''";e=e.replace("{1}","String"),e=e.replace("{2}",C(!0).replace("{0}",n))}if(S(l.type)){const n=l.default?l.default:l.isNull?"null":"0";e=e.replace("{1}","Number"),e=e.replace("{2}",C(!0).replace("{0}",n))}if(_(l.type)){const n=l.default?l.default:l.isNull?"null":"false";e=e.replace("{1}","Boolean"),e=e.replace("{2}",C(!0).replace("{0}",n))}T(l.type)&&(e=e.replace("{1}","Null"),e=e.replace("{2}",C(!0).replace("{0}","null"))),t.append(e),t.append(",")}t.newLine(),n=n.replace("{2}",t.value()),this.outConvertString+=n},onTypeChange(e){e.type=O(e.tsType)},onRootNameChange(){}}});const U=m();p("data-v-e013af06");const I={class:"HomePage"},J={style:{display:"flex","align-items":"center"}},D=d("转换方法"),P=d("格式化"),K={style:{overflow:"auto"}},L={key:0,style:{"margin-left":"10px"}},z={key:1};s();const B=U(((e,n,t,l,a,o)=>{const r=g("el-input"),p=g("el-checkbox"),s=g("el-button"),m=g("el-table-column"),b=g("el-option"),h=g("el-select"),v=g("el-table");return i(),u("div",I,[c("div",null,[c(r,{type:"textarea",placeholder:"请输入内容",modelValue:e.inputString,"onUpdate:modelValue":n[1]||(n[1]=n=>e.inputString=n)},null,8,["modelValue"]),c("div",J,[c(p,{modelValue:e.fnChecked,"onUpdate:modelValue":n[2]||(n[2]=n=>e.fnChecked=n)},{default:U((()=>[D])),_:1},8,["modelValue"]),c(r,{modelValue:e.rootName,"onUpdate:modelValue":n[3]||(n[3]=n=>e.rootName=n),onChange:n[4]||(n[4]=n=>e.onRootNameChange()),style:{margin:"0 8px",width:"120px"}},null,8,["modelValue"]),c(s,{onClick:n[5]||(n[5]=n=>e.formateJson())},{default:U((()=>[P])),_:1}),c(s,{onClick:n[6]||(n[6]=n=>e.generate())},{default:U((()=>[d("生成"+f(e.rootName),1)])),_:1})])]),c("div",K,[e.configData?(i(),u(v,{key:0,data:e.configData.props,"row-key":"label","default-expand-all":"","tree-props":{children:"props",hasChildren:"hasChildren"}},{default:U((()=>[c(m,{prop:"jsonKey",label:"jsonKey"}),c(m,{prop:"label",label:"属性名称"}),c(m,{prop:"type",label:"type"}),c(m,{prop:"tsType",label:"类型"},{default:U((n=>["Array"===n.row.type?(i(),u("span",L,f(e.tranferType(n.row)),1)):"Object"===n.row.type?(i(),u("span",z,f(n.row.tsType),1)):(i(),u(h,{key:2,style:{"margin-left":"10px"},size:"mini",modelValue:n.row.tsType,"onUpdate:modelValue":e=>n.row.tsType=e,onChange:t=>e.onTypeChange(n.row)},{default:U((()=>[c(b,{label:"string",value:"string"}),c(b,{label:"number",value:"number"}),c(b,{label:"boolean",value:"boolean"})])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]))])),_:1}),c(m,{prop:"tsType",label:"默认值"},{default:U((e=>[c(r,{size:"mini",modelValue:e.row.default,"onUpdate:modelValue":n=>e.row.default=n},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),c(m,{prop:"tsType",label:"注释"},{default:U((e=>[c(r,{size:"mini",modelValue:e.row.comment,"onUpdate:modelValue":n=>e.row.comment=n},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),c(m,{prop:"tsType",label:"null"},{default:U((e=>[c(p,{modelValue:e.row.isNull,"onUpdate:modelValue":n=>e.row.isNull=n},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"])):y("",!0)])])}));x.render=B,x.__scopeId="data-v-e013af06";export default x;
