var __vite_style__=document.createElement("style");__vite_style__.innerHTML=".HomePage[data-v-20e14577]{display:grid;grid-template-columns:repeat(2,1fr);height:calc(100vh - 60px);gap:20px}.el-textarea,.el-textarea__inner{height:100%}",document.head.appendChild(__vite_style__),System.register(["./vendor-legacy.c47731a3.js"],(function(e){"use strict";var n,t,a,l,r,o,p,i,s,c,u;return{setters:[function(e){n=e.d,t=e.p,a=e.i,l=e.o,r=e.c,o=e.t,p=e.u,i=e.g,s=e.w,c=e.v,u=e.r}],execute:function(){const d="\nexport function {0}(value?: any): {1} {\n    const conditions:ConditionItem[] = [\n      {2}\n    ];\n    return safeConvert(value, conditions);\n  }\n",f="\nexport interface {0} {\n{1}\n}\n",y='{\n   label: "{0}",\n   type: "{1}",\n   convert: {2} \n }';function m(e){return e?"(val: any, defaultVal = {0}) => val ?? defaultVal":"(val: any) => {0}"}function g(e){const n=Object.prototype.toString.call(e).match(/\[object[\s]*([A-Za-z]+)\]/);return n?n[1]:""}function h(e){return"Object"===e}function v(e){return"String"===e}function b(e){return"Number"===e}function _(e){return"Array"===e}function C(e){return"Boolean"===e}
/**
       * @license
       * Copyright Google Inc. All Rights Reserved.
       *
       * Use of this source code is governed by an MIT-style license that can be
       * found in the LICENSE file at https://angular.io/license
       */const w=/(-|_|\.|\s)+(.)?/g;function S(e){return e.replace(w,((e,n,t)=>t?t.toUpperCase():"")).replace(/^([A-Z])/,(e=>e.toLowerCase()))}function T(e){return e.split(".").map((e=>function(e){return e.charAt(0).toUpperCase()+e.substr(1)}(S(e)))).join(".")}class V{constructor(e){this._str="",this._str=null!=e?e:""}append(e){this._str+=e}newLine(){this._str+="\n"}addBlank(e=2){this._str+=new Array(e).fill(" ").join("")}value(){return this._str}}var j=e("default",n({name:"HomePage",data:()=>({inputString:"",configData:null,outString:"",outConvertString:"",fnChecked:!1}),methods:{tranferType(e){if(_(e.type)){var n;const t=new Array(e.deep).fill("[]").join("");return(h(null===(n=e.props[0])||void 0===n?void 0:n.type)?T(e.itemType):S(e.itemType))+t}return e.type},formateJson(){this.inputString=JSON.stringify(JSON.parse(this.inputString),null,2),this.configData=this.toConfigJson(JSON.parse(this.inputString))},generate(){this.outString="",this.configData&&(this.generateInterface(this.configData),this.fnChecked&&(this.outConvertString="\n/**\n * 公共方法可单独放置\n */\n// common start\nfunction safeConvert(source: any, conditions: ConditionItem[]) {\n  const res: any = {};\n  for (const con of conditions) {\n    let value = source?.[con.label];\n    if (con.type === 'Array') {\n        const val: any[] = [];\n        if (!(value instanceof Array)) {\n            value = [];\n        } \n        for (const item of value) {\n            val.push(con.convert(item))\n        }\n        res[con.label] = val;\n    } else {\n        res[con.label] = con.convert(value)\n    }\n  }\n  return res;\n}\n\n\ninterface ConditionItem {\n  label: string;\n  type: string;\n  convert: (val: any, defaultVal?: any) => any;\n}\n// common end\n",this.generateConvert(this.configData)),navigator.clipboard.writeText(this.outString+this.outConvertString).then((e=>{console.log("success")})))},toConfigJson(e,n="Welcome",t=1){const a=g(e),l={label:n,jsonKey:n,type:a,tsType:S(a),props:[],isNull:!1,deep:t,comment:""};if(_(a)){const n=this.mergeArray(e,t,l);h(n.type)&&l.props.push(n)}if(h(a)){l.tsType=T(l.label);for(const n in e)if(e.hasOwnProperty(n)){const a=e[n],r=g(a);h(r)||_(r)?l.props.push(this.toConfigJson(a,n)):l.props.push({label:n,type:r,props:[],isNull:!1,deep:t,comment:"",jsonKey:n,tsType:S(r)})}}return l},mergeArray(e,n=1,t){const a=e[0],l=g(a);let r;if(_(l))r=this.mergeArray(a,n+1,t);else if(h(l)){let a={};for(const n of e)a={...a,...n};t&&(t.deep=n,t.itemType=T(t.label)),r=this.toConfigJson(a,t.label)}else r={label:"",type:l,props:[],isNull:!1,deep:n,comment:"",jsonKey:"",tsType:S(l)},t&&(t.deep=n,t.itemType=S(l));return r},generateInterface(e){const n=new V;let t=f.replace("{0}",T(e.label));for(const a of e.props)a.comment&&(n.append(`/** ${a.comment} */`),n.newLine()),h(a.type)&&(n.append(`${a.label}: ${T(a.label)}`),this.generateInterface(a)),_(a.type)&&(n.append(`${a.label}: ${a.itemType}${new Array(a.deep).fill("[]").join()}`),a.props.length&&this.generateInterface(a.props[0])),v(a.type)&&n.append(`${a.label}: string`),b(a.type)&&n.append(`${a.label}: number`),C(a.type)&&n.append(`${a.label}: boolean`),n.append(","),n.newLine();this.outString+=t.replace("{1}",n.value())},generateConvert(e){let n=d.replace("{0}",S(e.label));n=n.replace("{1}",T(e.label));const t=new V;for(const a of e.props){let e=y.replace("{0}",a.label);h(a.type)&&(e=e.replace("{1}","Object"),e=e.replace("{2}",m().replace("{0}",`${S(a.label)}(val)`)),this.generateConvert(a)),_(a.type)&&(e=e.replace("{1}","Array"),a.props.length?(e=e.replace("{2}",m().replace("{0}",`${S(a.label)}(val)`)),this.generateConvert(a.props[0])):e=e.replace("{2}",m(!0).replace("{0}","[]"))),v(a.type)&&(e=e.replace("{1}","String"),e=e.replace("{2}",m(!0).replace("{0}","''"))),b(a.type)&&(e=e.replace("{1}","Number"),e=e.replace("{2}",m(!0).replace("{0}","0"))),C(a.type)&&(e=e.replace("{1}","Boolean"),e=e.replace("{2}",m(!0).replace("{0}","true"))),t.append(e),t.append(",")}t.newLine(),n=n.replace("{2}",t.value()),this.outConvertString+=n}}}));const A=s();t("data-v-20e14577");const x={class:"HomePage"},k=c("转换方法"),$=c("格式化"),J=c("生成"),I={style:{overflow:"auto"}},N={key:0,style:{"margin-left":"10px"}};a();const U=A(((e,n,t,a,s,c)=>{const d=u("el-input"),f=u("el-checkbox"),y=u("el-button"),m=u("el-table-column"),g=u("el-option"),h=u("el-select"),v=u("el-table");return l(),r("div",x,[o("div",null,[o(d,{type:"textarea",placeholder:"请输入内容",modelValue:e.inputString,"onUpdate:modelValue":n[1]||(n[1]=n=>e.inputString=n)},null,8,["modelValue"]),o("div",null,[o(f,{modelValue:e.fnChecked,"onUpdate:modelValue":n[2]||(n[2]=n=>e.fnChecked=n)},{default:A((()=>[k])),_:1},8,["modelValue"]),o(y,{onClick:n[3]||(n[3]=n=>e.formateJson())},{default:A((()=>[$])),_:1}),o(y,{onClick:n[4]||(n[4]=n=>e.generate())},{default:A((()=>[J])),_:1})])]),o("div",I,[e.configData?(l(),r(v,{key:0,data:e.configData.props,"row-key":"label","default-expand-all":"","tree-props":{children:"props",hasChildren:"hasChildren"}},{default:A((()=>[o(m,{prop:"jsonKey",label:"jsonKey"}),o(m,{prop:"label",label:"属性名称"}),o(m,{prop:"tsType",label:"类型"},{default:A((n=>["Array"===n.row.type?(l(),r("span",N,p(e.tranferType(n.row)),1)):(l(),r(h,{key:1,style:{"margin-left":"10px"},size:"mini",modelValue:n.row.tsType,"onUpdate:modelValue":e=>n.row.tsType=e},{default:A((()=>[o(g,{label:"string",value:"string"}),o(g,{label:"number",value:"number"}),o(g,{label:"boolean",value:"boolean"})])),_:2},1032,["modelValue","onUpdate:modelValue"]))])),_:1}),o(m,{prop:"tsType",label:"注释"},{default:A((e=>[o(d,{size:"mini",modelValue:e.row.comment,"onUpdate:modelValue":n=>e.row.comment=n},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"])):i("",!0)])])}));j.render=U,j.__scopeId="data-v-20e14577"}}}));
