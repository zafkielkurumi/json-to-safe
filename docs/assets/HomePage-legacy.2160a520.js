var __vite_style__=document.createElement("style");__vite_style__.innerHTML=".HomePage[data-v-1e7824a0]{display:grid;grid-template-columns:repeat(2,1fr);height:calc(100vh - 60px);gap:20px}.el-textarea,.el-textarea__inner{height:100%}",document.head.appendChild(__vite_style__),System.register(["./vendor-legacy.db239ecf.js"],(function(e){"use strict";var t,n,a,l,r,o,i,p,s,c,u;return{setters:[function(e){t=e.d,n=e.p,a=e.i,l=e.o,r=e.c,o=e.u,i=e.v,p=e.x,s=e.g,c=e.w,u=e.r}],execute:function(){const d="\nexport function {0}(value?: any): {1} {\n    const conditions:ConditionItem[] = [\n      {2}\n    ];\n    return safeConvert(value, conditions);\n  }\n",f="\nexport interface {0} {\n{1}\n}\n",m='{\n   label: "{0}",\n   type: "{1}",\n   convert: {2} \n }';function y(e){return e?"(val: any, defaultVal = {0}) => val ?? defaultVal":"(val: any) => {0}"}function g(e){const t=Object.prototype.toString.call(e).match(/\[object[\s]*([A-Za-z]+)\]/);return t?t[1]:""}function h(e){return"Object"===e}function v(e){return"String"===e}function b(e){return"Number"===e}function _(e){return"Array"===e}function C(e){return"Boolean"===e}
/**
       * @license
       * Copyright Google Inc. All Rights Reserved.
       *
       * Use of this source code is governed by an MIT-style license that can be
       * found in the LICENSE file at https://angular.io/license
       */const w=/(-|_|\.|\s)+(.)?/g;function S(e){return e.replace(w,((e,t,n)=>n?n.toUpperCase():"")).replace(/^([A-Z])/,(e=>e.toLowerCase()))}function V(e){return e.split(".").map((e=>function(e){return e.charAt(0).toUpperCase()+e.substr(1)}(S(e)))).join(".")}class x{constructor(e){this._str="",this._str=null!=e?e:""}append(e){this._str+=e}newLine(){this._str+="\n"}addBlank(e=2){this._str+=new Array(e).fill(" ").join("")}value(){return this._str}}var T=e("default",t({name:"HomePage",data:()=>({inputString:"",configData:null,outString:"",outConvertString:"",fnChecked:!1,rootName:"Welcome"}),methods:{tranferType(e){if(_(e.type)){var t;const n=new Array(e.deep).fill("[]").join("");return(h(null===(t=e.props[0])||void 0===t?void 0:t.type)?V(e.itemType):S(e.itemType))+n}return e.type},formateJson(){this.inputString=JSON.stringify(JSON.parse(this.inputString),null,2),this.configData=this.toConfigJson(JSON.parse(this.inputString),this.rootName)},generate(){this.outString="",this.configData&&(this.generateInterface(this.configData),this.fnChecked&&(this.outConvertString="\n/**\n * 公共方法可单独放置\n */\n// common start\nfunction safeConvert(source: any, conditions: ConditionItem[]) {\n  const res: any = {};\n  for (const con of conditions) {\n    let value = source?.[con.label];\n    if (con.type === 'Array') {\n        const val: any[] = [];\n        if (!(value instanceof Array)) {\n            value = [];\n        } \n        for (const item of value) {\n            val.push(con.convert(item))\n        }\n        res[con.label] = val;\n    } else {\n        res[con.label] = con.convert(value)\n    }\n  }\n  return res;\n}\n\n\ninterface ConditionItem {\n  label: string;\n  type: string;\n  convert: (val: any, defaultVal?: any) => any;\n}\n// common end\n",this.generateConvert(this.configData)),navigator.clipboard.writeText(this.outString+this.outConvertString).then((e=>{console.log("success"),this.$message.success("已复制到剪切板")})))},toConfigJson(e,t,n=1){const a=g(e),l={label:t,jsonKey:t,type:a,tsType:S(a),props:[],isNull:!1,deep:n,comment:""};if(_(a)){const t=this.mergeArray(e,n,l);h(t.type)&&l.props.push(t)}if(h(a)){l.tsType=V(l.label);for(const t in e)if(e.hasOwnProperty(t)){const a=e[t],r=g(a);h(r)||_(r)?l.props.push(this.toConfigJson(a,t)):l.props.push({label:t,type:r,props:[],isNull:!1,deep:n,comment:"",jsonKey:t,tsType:S(r)})}}return l},mergeArray(e,t=1,n){const a=e[0],l=g(a);let r;if(_(l))r=this.mergeArray(a,t+1,n);else if(h(l)){let a={};for(const t of e)a={...a,...t};n&&(n.deep=t,n.itemType=V(n.label)),r=this.toConfigJson(a,n.label)}else r={label:"",type:l,props:[],isNull:!1,deep:t,comment:"",jsonKey:"",tsType:S(l)},n&&(n.deep=t,n.itemType=S(l));return r},generateInterface(e){const t=new x;let n=f.replace("{0}",V(e.label));for(const a of e.props)a.comment&&(t.append(`/** ${a.comment} */`),t.newLine()),h(a.type)&&(t.append(`${a.label}: ${V(a.label)}`),this.generateInterface(a)),_(a.type)&&(t.append(`${a.label}: ${a.itemType}${new Array(a.deep).fill("[]").join()}`),a.props.length&&this.generateInterface(a.props[0])),v(a.type)&&t.append(`${a.label}: string`),b(a.type)&&t.append(`${a.label}: number`),C(a.type)&&t.append(`${a.label}: boolean`),t.append(","),t.newLine();this.outString+=n.replace("{1}",t.value())},generateConvert(e){let t=d.replace("{0}",S(e.label+"Convert"));t=t.replace("{1}",V(e.label));const n=new x;for(const a of e.props){let e=m.replace("{0}",a.label);h(a.type)&&(e=e.replace("{1}","Object"),e=e.replace("{2}",y().replace("{0}",`${S(a.label)}(val)`)),this.generateConvert(a)),_(a.type)&&(e=e.replace("{1}","Array"),a.props.length?(e=e.replace("{2}",y().replace("{0}",`${S(a.label)}(val)`)),this.generateConvert(a.props[0])):e=e.replace("{2}",y(!0).replace("{0}","[]"))),v(a.type)&&(e=e.replace("{1}","String"),e=e.replace("{2}",y(!0).replace("{0}","''"))),b(a.type)&&(e=e.replace("{1}","Number"),e=e.replace("{2}",y(!0).replace("{0}","0"))),C(a.type)&&(e=e.replace("{1}","Boolean"),e=e.replace("{2}",y(!0).replace("{0}","true"))),n.append(e),n.append(",")}n.newLine(),t=t.replace("{2}",n.value()),this.outConvertString+=t}}}));const j=c();n("data-v-1e7824a0");const A={class:"HomePage"},N={style:{display:"flex","align-items":"center"}},k=i("转换方法"),$=i("格式化"),J={style:{overflow:"auto"}},U={key:0,style:{"margin-left":"10px"}};a();const I=j(((e,t,n,a,c,d)=>{const f=u("el-input"),m=u("el-checkbox"),y=u("el-button"),g=u("el-table-column"),h=u("el-option"),v=u("el-select"),b=u("el-table");return l(),r("div",A,[o("div",null,[o(f,{type:"textarea",placeholder:"请输入内容",modelValue:e.inputString,"onUpdate:modelValue":t[1]||(t[1]=t=>e.inputString=t)},null,8,["modelValue"]),o("div",N,[o(m,{modelValue:e.fnChecked,"onUpdate:modelValue":t[2]||(t[2]=t=>e.fnChecked=t)},{default:j((()=>[k])),_:1},8,["modelValue"]),o(f,{modelValue:e.rootName,"onUpdate:modelValue":t[3]||(t[3]=t=>e.rootName=t),style:{margin:"0 8px",width:"120px"}},null,8,["modelValue"]),o(y,{onClick:t[4]||(t[4]=t=>e.formateJson())},{default:j((()=>[$])),_:1}),o(y,{onClick:t[5]||(t[5]=t=>e.generate())},{default:j((()=>[i("生成"+p(e.rootName),1)])),_:1})])]),o("div",J,[e.configData?(l(),r(b,{key:0,data:e.configData.props,"row-key":"label","default-expand-all":"","tree-props":{children:"props",hasChildren:"hasChildren"}},{default:j((()=>[o(g,{prop:"jsonKey",label:"jsonKey"}),o(g,{prop:"label",label:"属性名称"}),o(g,{prop:"tsType",label:"类型"},{default:j((t=>["Array"===t.row.type?(l(),r("span",U,p(e.tranferType(t.row)),1)):(l(),r(v,{key:1,style:{"margin-left":"10px"},size:"mini",modelValue:t.row.tsType,"onUpdate:modelValue":e=>t.row.tsType=e},{default:j((()=>[o(h,{label:"string",value:"string"}),o(h,{label:"number",value:"number"}),o(h,{label:"boolean",value:"boolean"})])),_:2},1032,["modelValue","onUpdate:modelValue"]))])),_:1}),o(g,{prop:"tsType",label:"注释"},{default:j((e=>[o(f,{size:"mini",modelValue:e.row.comment,"onUpdate:modelValue":t=>e.row.comment=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"])):s("",!0)])])}));T.render=I,T.__scopeId="data-v-1e7824a0"}}}));
