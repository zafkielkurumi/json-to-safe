var __vite_style__=document.createElement("style");__vite_style__.innerHTML=".HomePage[data-v-e013af06]{display:grid;grid-template-columns:1fr 2fr;height:calc(100vh - 60px);gap:20px}.el-textarea,.el-textarea__inner{height:100%}",document.head.appendChild(__vite_style__),System.register(["./vendor-legacy.db239ecf.js"],(function(e){"use strict";var t,n,l,a,o,r,p,s,i,u,c;return{setters:[function(e){t=e.d,n=e.p,l=e.i,a=e.o,o=e.c,r=e.u,p=e.v,s=e.x,i=e.g,u=e.w,c=e.r}],execute:function(){const d="\nexport function {0}(value?: any): {1} {\n    const conditions:ConditionItem[] = [\n      {2}\n    ];\n    return safeConvert(value, conditions);\n  }\n",f="\nexport interface {0} {\n{1}\n}\n",y='{\n   label: "{0}",\n   type: "{1}",\n   convert: {2} \n }';function m(e){return e?"(val: any, defaultVal = {0}) => val ?? defaultVal":"(val: any) => {0}"}function g(e){const t=Object.prototype.toString.call(e).match(/\[object[\s]*([A-Za-z]+)\]/);return t?t[1]:""}function h(e){return"Object"===e}function v(e){return"String"===e}function b(e){return"Null"===e}function C(e){return"Number"===e}function _(e){return"Array"===e}function w(e){return"Boolean"===e}
/**
       * @license
       * Copyright Google Inc. All Rights Reserved.
       *
       * Use of this source code is governed by an MIT-style license that can be
       * found in the LICENSE file at https://angular.io/license
       */const V=/(-|_|\.|\s)+(.)?/g;function N(e){return e.replace(V,((e,t,n)=>n?n.toUpperCase():"")).replace(/^([A-Z])/,(e=>e.toLowerCase()))}function T(e){return e.split(".").map((e=>function(e){return e.charAt(0).toUpperCase()+e.substr(1)}(N(e)))).join(".")}class S{constructor(e){this._str="",this._str=null!=e?e:""}append(e){this._str+=e}newLine(){this._str+="\n"}addBlank(e=2){this._str+=new Array(e).fill(" ").join("")}value(){return this._str}}var x=e("default",t({name:"HomePage",data:()=>({inputString:"",configData:null,outString:"",outConvertString:"",fnChecked:!1,rootName:"Welcome"}),methods:{tranferType(e){if(_(e.type)){var t;const n=new Array(e.deep).fill("[]").join("");return(h(null===(t=e.props[0])||void 0===t?void 0:t.type)?T(e.itemType):N(e.itemType))+n}return e.type},formateJson(){this.inputString=JSON.stringify(JSON.parse(this.inputString),null,2),this.configData=this.toConfigJson(JSON.parse(this.inputString),this.rootName)},generate(){this.outString="",this.configData&&(this.generateInterface(this.configData),this.fnChecked&&(this.outConvertString="\n/**\n * 公共方法可单独放置\n */\n// common start\nfunction safeConvert(source: any, conditions: ConditionItem[]) {\n  const res: any = {};\n  for (const con of conditions) {\n    let value = source?.[con.label];\n    if (con.type === 'Array') {\n        const val: any[] = [];\n        if (!(value instanceof Array)) {\n            value = [];\n        } \n        for (const item of value) {\n            val.push(con.convert(item))\n        }\n        res[con.label] = val;\n    } else {\n        res[con.label] = con.convert(value)\n    }\n  }\n  return res;\n}\n\n\ninterface ConditionItem {\n  label: string;\n  type: string;\n  convert: (val: any, defaultVal?: any) => any;\n}\n// common end\n",this.generateConvert(this.configData)),navigator.clipboard.writeText(this.outString+this.outConvertString).then((e=>{console.log("success"),this.$message.success("已复制到剪切板")})))},toConfigJson(e,t,n=1){const l=g(e),a={label:t,jsonKey:t,type:l,tsType:N(l),props:[],isNull:!1,deep:n,comment:""};if(_(l)){const t=this.mergeArray(e,n,a);h(t.type)&&a.props.push(t)}if(h(l)){a.tsType=T(a.label);for(const t in e)if(e.hasOwnProperty(t)){const l=e[t],o=g(l);h(o)||_(o)?a.props.push(this.toConfigJson(l,t)):a.props.push({label:t,type:o,props:[],isNull:!1,deep:n,comment:"",jsonKey:t,tsType:N(o)})}}return a},mergeArray(e,t=1,n){const l=e[0],a=g(l);let o;if(_(a))o=this.mergeArray(l,t+1,n);else if(h(a)){let l={};for(const t of e)l={...l,...t};n&&(n.deep=t,n.itemType=T(n.label)),o=this.toConfigJson(l,n.label)}else o={label:"",type:a,props:[],isNull:!1,deep:t,comment:"",jsonKey:"",tsType:N(a)},n&&(n.deep=t,n.itemType=N(a));return o},generateInterface(e){const t=new S;let n=f.replace("{0}",T(e.label));for(const l of e.props){l.comment&&(t.append(`/** ${l.comment} */`),t.newLine());const e=l.isNull?"| null":"";h(l.type)&&(t.append(`${l.label}: ${T(l.label)}`),this.generateInterface(l)),_(l.type)&&(t.append(`${l.label}: ${l.itemType}${new Array(l.deep).fill("[]").join()}`),l.props.length&&this.generateInterface(l.props[0])),v(l.type)&&t.append(`${l.label}: string ${e}`),C(l.type)&&t.append(`${l.label}: number ${e}`),w(l.type)&&t.append(`${l.label}: boolean ${e}`),b(l.type)&&t.append(`${l.label}: null`),t.append(","),t.newLine()}this.outString+=n.replace("{1}",t.value())},generateConvert(e){let t=d.replace("{0}",N(e.label+"Convert"));t=t.replace("{1}",T(e.label));const n=new S;for(const l of e.props){let e=y.replace("{0}",l.label);if(h(l.type)&&(e=e.replace("{1}","Object"),e=e.replace("{2}",m().replace("{0}",`${N(l.label+"Convert")}(val)`)),this.generateConvert(l)),_(l.type)){e=e.replace("{1}","Array");const t=l.default?l.default:l.isNull?"null":"[]";l.props.length?(e=e.replace("{2}",m().replace("{0}",`${N(l.label+"Convert")}(val)`)),this.generateConvert(l.props[0])):e=e.replace("{2}",m(!0).replace("{0}",t))}if(v(l.type)){const t=l.default?l.default:l.isNull?"null":"''";e=e.replace("{1}","String"),e=e.replace("{2}",m(!0).replace("{0}",t))}if(C(l.type)){const t=l.default?l.default:l.isNull?"null":"0";e=e.replace("{1}","Number"),e=e.replace("{2}",m(!0).replace("{0}",t))}if(w(l.type)){const t=l.default?l.default:l.isNull?"null":"false";e=e.replace("{1}","Boolean"),e=e.replace("{2}",m(!0).replace("{0}",t))}b(l.type)&&(e=e.replace("{1}","Null"),e=e.replace("{2}",m(!0).replace("{0}","null"))),n.append(e),n.append(",")}n.newLine(),t=t.replace("{2}",n.value()),this.outConvertString+=t},onTypeChange(e){e.type=T(e.tsType)},onRootNameChange(){}}}));const $=u();n("data-v-e013af06");const j={class:"HomePage"},A={style:{display:"flex","align-items":"center"}},k=p("转换方法"),U=p("格式化"),J={style:{overflow:"auto"}},I={key:0,style:{"margin-left":"10px"}},O={key:1};l();const D=$(((e,t,n,l,u,d)=>{const f=c("el-input"),y=c("el-checkbox"),m=c("el-button"),g=c("el-table-column"),h=c("el-option"),v=c("el-select"),b=c("el-table");return a(),o("div",j,[r("div",null,[r(f,{type:"textarea",placeholder:"请输入内容",modelValue:e.inputString,"onUpdate:modelValue":t[1]||(t[1]=t=>e.inputString=t)},null,8,["modelValue"]),r("div",A,[r(y,{modelValue:e.fnChecked,"onUpdate:modelValue":t[2]||(t[2]=t=>e.fnChecked=t)},{default:$((()=>[k])),_:1},8,["modelValue"]),r(f,{modelValue:e.rootName,"onUpdate:modelValue":t[3]||(t[3]=t=>e.rootName=t),onChange:t[4]||(t[4]=t=>e.onRootNameChange()),style:{margin:"0 8px",width:"120px"}},null,8,["modelValue"]),r(m,{onClick:t[5]||(t[5]=t=>e.formateJson())},{default:$((()=>[U])),_:1}),r(m,{onClick:t[6]||(t[6]=t=>e.generate())},{default:$((()=>[p("生成"+s(e.rootName),1)])),_:1})])]),r("div",J,[e.configData?(a(),o(b,{key:0,data:e.configData.props,"row-key":"label","default-expand-all":"","tree-props":{children:"props",hasChildren:"hasChildren"}},{default:$((()=>[r(g,{prop:"jsonKey",label:"jsonKey"}),r(g,{prop:"label",label:"属性名称"}),r(g,{prop:"type",label:"type"}),r(g,{prop:"tsType",label:"类型"},{default:$((t=>["Array"===t.row.type?(a(),o("span",I,s(e.tranferType(t.row)),1)):"Object"===t.row.type?(a(),o("span",O,s(t.row.tsType),1)):(a(),o(v,{key:2,style:{"margin-left":"10px"},size:"mini",modelValue:t.row.tsType,"onUpdate:modelValue":e=>t.row.tsType=e,onChange:n=>e.onTypeChange(t.row)},{default:$((()=>[r(h,{label:"string",value:"string"}),r(h,{label:"number",value:"number"}),r(h,{label:"boolean",value:"boolean"})])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]))])),_:1}),r(g,{prop:"tsType",label:"默认值"},{default:$((e=>[r(f,{size:"mini",modelValue:e.row.default,"onUpdate:modelValue":t=>e.row.default=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),r(g,{prop:"tsType",label:"注释"},{default:$((e=>[r(f,{size:"mini",modelValue:e.row.comment,"onUpdate:modelValue":t=>e.row.comment=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),r(g,{prop:"tsType",label:"null"},{default:$((e=>[r(y,{modelValue:e.row.isNull,"onUpdate:modelValue":t=>e.row.isNull=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"])):i("",!0)])])}));x.render=D,x.__scopeId="data-v-e013af06"}}}));
